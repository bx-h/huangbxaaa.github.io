<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="摘要：Date；数字类；枚举；异常与错误；集合">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="JavaNote_4" />
<meta property="og:description" content="摘要：Date；数字类；枚举；异常与错误；集合" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://huangbxaaa.github.io/en/posts/javanote_4/" />
<meta property="article:published_time" content="2020-06-08T20:24:04+08:00" />
<meta property="article:modified_time" content="2020-06-08T20:24:04+08:00" /><meta property="og:site_name" content="Hugo Zzo Theme" />
<title>JavaNote_4 | Hugo Zzo Theme</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.b3215d9d1d18d9051e7fbe8f256ff80e30f41d29073b86348e230d297b771002.css" integrity="sha256-syFdnR0Y2QUef76PJW/4DjD0HSkHO4Y0jiMNKXt3EAI=">
<script defer src="/en.search.min.aafa5705bd561f3da11b77b6d7941927d31d043ec4a7e111cb83b38b9c246074.js" integrity="sha256-qvpXBb1WHz2hG3e215QZJ9MdBD7Ep&#43;ERy4Ozi5wkYHQ="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/en"><span>Hugo Zzo Theme</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  
















</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>JavaNote_4</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#date-javautil">Date [Java.util]</a>
      <ul>
        <li><a href="#simpledateformat-javatext">SimpleDateFormat [java.text]</a></li>
      </ul>
    </li>
    <li><a href="#数字类">数字类</a>
      <ul>
        <li><a href="#数字格式化decimalformat-javatext">数字格式化：DecimalFormat [java.text]</a></li>
        <li><a href="#高精度数据bigdecimal">高精度数据BigDecimal</a></li>
        <li><a href="#随机数">随机数</a></li>
      </ul>
    </li>
    <li><a href="#枚举">枚举</a></li>
    <li><a href="#异常">异常</a>
      <ul>
        <li><a href="#编译时异常">编译时异常</a></li>
        <li><a href="#运行时异常">运行时异常</a></li>
        <li><a href="#错误">错误</a></li>
        <li><a href="#对异常的处理">对异常的处理</a></li>
        <li><a href="#异常的方法">异常的方法</a></li>
        <li><a href="#finally">finally</a></li>
        <li><a href="#自定义异常">自定义异常</a></li>
        <li><a href="#异常方法的重写">异常方法的重写</a></li>
      </ul>
    </li>
    <li><a href="#集合">集合</a>
      <ul>
        <li><a href="#概念">概念</a></li>
        <li><a href="#体系结构">体系结构</a></li>
        <li><a href="#collection-1">Collection</a></li>
        <li><a href="#list">List</a></li>
        <li><a href="#set">Set</a></li>
        <li><a href="#集合工具类">集合工具类</a></li>
      </ul>
    </li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
<article class="markdown">
  <h1>
    <a href="/en/posts/javanote_4/">JavaNote_4</a>
  </h1>
  
  <h5>June 8, 2020</h5>



  
  <div>
    
      <a href="/en/categories/java/">Java</a>
  </div>
  

  

  
  <div>
    
      <a href="/en/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a>
  </div>
  


  <p><p>摘要：Date；数字类；枚举；异常与错误；集合</p>
<h2 id="date-javautil">
  Date [Java.util]
  <a class="anchor" href="#date-javautil">#</a>
</h2>
<p>构造方法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">java.util</span><span class="o">;</span>

<span class="n">Date</span> <span class="n">nowTime</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">();</span> <span class="c1">//获取系统当前时间
</span></code></pre></td></tr></table>
</div>
</div><h3 id="simpledateformat-javatext">
  SimpleDateFormat [java.text]
  <a class="anchor" href="#simpledateformat-javatext">#</a>
</h3>
<p>自定义格式的日期，可以将Date格式化为String</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">SimpleDateFormat</span> <span class="n">sdf</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&#34;yyyy-MM-dd HH:mm:ss SSS&#34;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">nowTimeStr</span> <span class="o">=</span> <span class="n">sdf</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">nowTime</span><span class="o">);</span> <span class="c1">//使用上文的nowTime
</span><span class="c1"></span>
</code></pre></td></tr></table>
</div>
</div><p>将String转为Date</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">time</span> <span class="o">=</span> <span class="s">&#34;2008-08-08 08:08:08 888&#34;</span><span class="o">;</span>
<span class="n">SimpleDateFormat</span> <span class="n">sdf2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&#34;yyyy-MM-dd HH:mm:ss SSS&#34;</span><span class="o">);</span> <span class="c1">//要和字符串要表达的格式一样
</span><span class="c1"></span><span class="n">Date</span> <span class="n">dateTime</span> <span class="o">=</span> <span class="n">sdf2</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">time</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">dateTime</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>1970.01.01到系统目前时间的总毫秒数。可以用于统计程序运行时间。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kt">long</span> <span class="n">nowTimeMillis</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
<span class="c1">//统计运行时间
</span><span class="c1"></span><span class="kt">long</span> <span class="n">begin</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
<span class="n">doSomething</span><span class="o">();</span>
<span class="kt">long</span> <span class="n">end</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;耗费时长&#34;</span> <span class="o">+</span> <span class="o">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">begin</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34;毫秒&#34;</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>总结</p>
<p><img src="/picture/JavaNote_4-20200517112409847.png" alt="image-20200517112409847" /></p>
<h2 id="数字类">
  数字类
  <a class="anchor" href="#%e6%95%b0%e5%ad%97%e7%b1%bb">#</a>
</h2>
<h3 id="数字格式化decimalformat-javatext">
  数字格式化：DecimalFormat [java.text]
  <a class="anchor" href="#%e6%95%b0%e5%ad%97%e6%a0%bc%e5%bc%8f%e5%8c%96decimalformat-javatext">#</a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/*
</span><span class="cm"># 代表任意数字
</span><span class="cm">, 代表千分位
</span><span class="cm">. 代表小数点
</span><span class="cm">0 不够补0
</span><span class="cm">*/</span>
<span class="n">DecimalFormat</span> <span class="n">df</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DecimalFormat</span><span class="o">(</span><span class="s">&#34;###,###.##&#34;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">1234</span><span class="o">.</span><span class="na">56</span><span class="o">);</span> <span class="c1">// 输出：&#34;1,234.56&#34;
</span><span class="c1"></span>
<span class="n">DecimalFormat</span> <span class="n">df2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DecimalFormat</span><span class="o">(</span><span class="s">&#34;###,###.0000&#34;</span><span class="o">);</span> <span class="c1">//保留4位小数，不够补0
</span><span class="c1"></span><span class="n">String</span> <span class="n">s1</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">1234</span><span class="o">.</span><span class="na">56</span><span class="o">);</span> <span class="c1">//输出：&#34;1,234.5600&#34;
</span></code></pre></td></tr></table>
</div>
</div><h3 id="高精度数据bigdecimal">
  高精度数据BigDecimal
  <a class="anchor" href="#%e9%ab%98%e7%b2%be%e5%ba%a6%e6%95%b0%e6%8d%aebigdecimal">#</a>
</h3>
<p>BigDecimal 属于大数据，精度极高。不属于基本数据类型，属于引用数据类型。这是SUN提供的一个类，专门用于财务软件中。</p>
<p>java.math.BigDecimal</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">BigDecimal</span> <span class="n">v1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="n">100</span><span class="o">);</span>
<span class="n">BigDecimal</span> <span class="n">v2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="n">200</span><span class="o">);</span>
<span class="n">BigDecimal</span> <span class="n">v3</span> <span class="o">=</span> <span class="n">v1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">v2</span><span class="o">);</span> <span class="c1">// 不能直接用+号，因为不是基本类型。减乘除同理。
</span></code></pre></td></tr></table>
</div>
</div><h3 id="随机数">
  随机数
  <a class="anchor" href="#%e9%9a%8f%e6%9c%ba%e6%95%b0">#</a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">();</span>
<span class="c1">// 随机产生一个int类型取值范围内的数字
</span><span class="c1"></span><span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>

<span class="c1">// 产生[0, 100]之间的随机int数
</span><span class="c1"></span><span class="kt">int</span> <span class="n">num2</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="n">101</span><span class="o">);</span>

</code></pre></td></tr></table>
</div>
</div><div style="page-break-after: always;"></div>
<h2 id="枚举">
  枚举
  <a class="anchor" href="#%e6%9e%9a%e4%b8%be">#</a>
</h2>
<p>一枚一枚可以列举出来的。Boolean就是两种情况的枚举。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// 定义
</span><span class="c1"></span><span class="kd">enum</span> <span class="n">Result</span> <span class="o">{</span>
	<span class="n">SUCCESS</span><span class="err">，</span> <span class="n">FAIL</span>
<span class="o">}</span>

<span class="c1">// 使用
</span><span class="c1"></span><span class="n">Result</span><span class="o">.</span><span class="na">SUCCESS</span><span class="o">;</span>
<span class="n">Result</span><span class="o">.</span><span class="na">FAIL</span><span class="o">;</span>

<span class="c1">// 例子
</span><span class="c1"></span><span class="kd">public</span> <span class="kd">static</span> <span class="n">Result</span> <span class="nf">devide</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(...)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">SUCCESS</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">else</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">FAIL</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><div style="page-break-after: always;"></div>
<h2 id="异常">
  异常
  <a class="anchor" href="#%e5%bc%82%e5%b8%b8">#</a>
</h2>
<p>异常在java中以类的形式存在，每一个异常类都可以创建异常对象。</p>
<p>发生异常时，JVM会new异常对象，并抛出，打印信息到控制台。</p>
<p><img src="/picture/JavaNote_4-20200518154156553.png" alt="image-20200518154156553" /></p>
<h3 id="编译时异常">
  编译时异常
  <a class="anchor" href="#%e7%bc%96%e8%af%91%e6%97%b6%e5%bc%82%e5%b8%b8">#</a>
</h3>
<ul>
<li>要求程序员在编写程序阶段必须处理完毕。用<code>throw</code>或者<code>try catch</code></li>
<li>一般是在编写程序时就预料到可能会发生异常，如读写文件时文件不存在</li>
</ul>
<h3 id="运行时异常">
  运行时异常
  <a class="anchor" href="#%e8%bf%90%e8%a1%8c%e6%97%b6%e5%bc%82%e5%b8%b8">#</a>
</h3>
<p>也叫“非受控异常”，“未受检异常”。在编写程序时无法被编译器检查出来，也可以不进行处理。</p>
<h3 id="错误">
  错误
  <a class="anchor" href="#%e9%94%99%e8%af%af">#</a>
</h3>
<p>error发生时，java程序只能够终止，JVM退出。</p>
<h3 id="对异常的处理">
  对异常的处理
  <a class="anchor" href="#%e5%af%b9%e5%bc%82%e5%b8%b8%e7%9a%84%e5%a4%84%e7%90%86">#</a>
</h3>
<p>假如一个方法带着<code>throw ...</code>，那么调用它时，会接受到异常。要对它进行处理。要么自己捕捉，要么继续上报。</p>
<p>发生异常时的两种处理方式：</p>
<ol>
<li>在方法声明的位置上使用<code>throw</code>，来完成异常的继续上抛，抛给上一级。并且抛出的异常要么等于接收到的异常，要么是接收到的异常的父类。（上报）</li>
<li>使用<code>try...catch</code>进行捕捉，在本级处理（捕捉）</li>
</ol>
<p>只要异常没有捕捉，采用上报<code>throw</code>的方式，<code>throw</code>后面的代码不会执行。</p>
<p>另外需要注意，try语句块中的某一行出现异常，该行后面的代码不会执行。</p>
<p>jdk8新特性：允许catch多种异常</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="k">try</span> <span class="o">{</span>

<span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">FileNotFoundException</span> <span class="o">|</span> <span class="n">ArithmeticException</span> <span class="o">|</span> <span class="n">NullPointerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>

<span class="o">}</span> 
</code></pre></td></tr></table>
</div>
</div><p>也可以直接写这些所有异常的父类<code>Exception</code></p>
<h3 id="异常的方法">
  异常的方法
  <a class="anchor" href="#%e5%bc%82%e5%b8%b8%e7%9a%84%e6%96%b9%e6%b3%95">#</a>
</h3>
<p>获取异常简单的描述信息：<code>String msg = exception.getMessage();</code></p>
<p>打印异常追踪的堆栈信息：<code>exception.printStackTrace();</code> 异步方式输出。</p>
<p>如何看异常追踪堆栈信息？</p>
<p>从上往下看，忽略掉SUN公司的代码定位处。查看第一个出现的自己代码错误的位置，越往下越往父函数（调用者）跳。</p>
<h3 id="finally">
  finally
  <a class="anchor" href="#finally">#</a>
</h3>
<p>finally中的代码一定会执行。</p>
<p>try可以不跟catch，只跟finally</p>
<p>如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/*
</span><span class="cm">执行顺序：1 -&gt; 3 -&gt; 2
</span><span class="cm">finally一定会执行，return最后执行。
</span><span class="cm">*/</span>
<span class="k">try</span> <span class="o">{</span>
	<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;try....&#34;</span><span class="o">);</span>  <span class="c1">// 1
</span><span class="c1"></span>	<span class="k">return</span><span class="o">;</span>  <span class="c1">// 2
</span><span class="c1"></span><span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
	<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;finally...&#34;</span><span class="o">);</span>  <span class="c1">//3
</span><span class="c1"></span><span class="o">}</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Hello&#34;</span><span class="o">);</span> <span class="c1">// 这句语句没法执行到。
</span><span class="c1"></span>

</code></pre></td></tr></table>
</div>
</div><p>但是，假如采用<code>exit</code>退出<code>jvm</code>，则<code>finally</code>无法执行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="k">try</span> <span class="o">{</span>
	<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;try....&#34;</span><span class="o">);</span>  <span class="c1">// 1
</span><span class="c1"></span>	<span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>  <span class="c1">// 2
</span><span class="c1"></span><span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
	<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;finally...&#34;</span><span class="o">);</span>  <span class="c1">// 这句语句没法执行到
</span><span class="c1"></span><span class="o">}</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Hello&#34;</span><span class="o">);</span> <span class="c1">// 这句语句没法执行到。
</span><span class="c1"></span>
</code></pre></td></tr></table>
</div>
</div><p>面试题：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExceptionTest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
         <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">m</span><span class="o">();</span>
	    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>   <span class="c1">// 100
</span><span class="c1"></span>    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">m</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">100</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">i</span><span class="o">;</span> <span class="c1">// 执行到这里时，暂时把i存储起来。
</span><span class="c1"></span>        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="n">i</span><span class="o">++;</span>
            <span class="c1">// ++i; 效果相同
</span><span class="c1"></span>        <span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>反编译：（反编译工具：DJ Java Decompiler）</p>
<p><img src="/picture/JavaNote_4-ScreenClip.png" alt="ScreenClip" /></p>
<p>可见，把<code>i</code>的值先暂时存储到<code>j</code>中。</p>
<p>面试题: <code>final, finally, finalize</code>的区别</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExceptionTest</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="c1">// final表示关键字，表示修饰的变量不可变。
</span><span class="c1"></span>		<span class="kd">final</span> <span class="kt">int</span> <span class="o">=</span> <span class="n">100</span><span class="o">;</span> 
		
		<span class="c1">// finally是一个关键字，与try连用，用在异常处理机制中，finally中的方法一定会执行
</span><span class="c1"></span>		<span class="k">try</span> <span class="o">{</span>
		
		<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
			<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;finally....&#34;</span><span class="o">);</span>
		<span class="o">}</span>
		
		<span class="c1">// finalize() 是Object类中的一个方法，作为方法名出现。
</span><span class="c1"></span>		<span class="c1">// 所以finalize是标识符。已过时。
</span><span class="c1"></span>         <span class="c1">// 它是被JVM的垃圾回收器进行调用的
</span><span class="c1"></span>		
		
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="自定义异常">
  自定义异常
  <a class="anchor" href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%bc%82%e5%b8%b8">#</a>
</h3>
<p>SUN公司提供的异常肯定是不够用的，需要我们自定义与实际业务挂钩的异常类。</p>
<p>如何定义：</p>
<p>第一步，编写一个类继承<code>Exception</code>（定义为编译时异常）或者<code>Runtime Exception</code>（定义为运行时异常）。假如异常发生概率较高，则定义为编译时异常，强制程序员提前处理比较好。假如发生概率低，则定义为运行时异常。</p>
<p>第二步，提供两个构造方法，一个无参数的，一个带有<code>String</code>参数的</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExceptionTest</span><span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">MyException</span> <span class="n">e</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyException</span><span class="o">(</span><span class="s">&#34;其实你没有什么错误&#34;</span><span class="o">);</span>
		<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">MyException</span> <span class="kd">extends</span> <span class="n">Exception</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="nf">MyException</span><span class="o">(){</span>
		<span class="kd">super</span><span class="o">();</span>
	<span class="o">}</span>
	
	<span class="kd">public</span> <span class="nf">MyException</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>修改之前的数组模拟栈程序：</p>
<p><img src="/picture/JavaNote_4-20200519154055251.png" alt="image-20200519154055251" /></p>
<p>注意，代码体中是<code>throw</code>，函数声明上是<code>throws</code>.</p>
<p>异常进行上抛，要在方法声明上写好<code>throws</code>，不能自己抛自己<code>try catch</code>。抛到main函数中进行捕捉处理。</p>
<h3 id="异常方法的重写">
  异常方法的重写
  <a class="anchor" href="#%e5%bc%82%e5%b8%b8%e6%96%b9%e6%b3%95%e7%9a%84%e9%87%8d%e5%86%99">#</a>
</h3>
<p>子类中重写的方法抛出的异常不能比父类中的异常更宽泛，更多。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">Animal</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doSome</span><span class="o">()</span> <span class="o">{}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doOther</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Cat</span> <span class="kd">extends</span> <span class="n">Animal</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doSome</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{}</span> <span class="c1">// 编译错误。
</span><span class="c1"></span>    <span class="cm">/*
</span><span class="cm">    public void doOther() {} // 正常
</span><span class="cm">    public void doOther() throws Exception {} // 正常
</span><span class="cm">    public void doOther() throws NullPointerException {} // 正常
</span><span class="cm">    
</span><span class="cm">    */</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>编程习惯经验分享</p>
<p>![ScreenClip [1]](/picture/JavaNote_4-ScreenClip [1].png)</p>
<p>一个很好的案例：（武器项目，涉及接口，多态，异常处理，数组）</p>
<p><a href="https://www.bilibili.com/video/BV1mE411x7Wt?p=182">https://www.bilibili.com/video/BV1mE411x7Wt?p=182</a></p>
<p>java进阶视频第182集</p>
<h2 id="集合">
  集合
  <a class="anchor" href="#%e9%9b%86%e5%90%88">#</a>
</h2>
<h3 id="概念">
  概念
  <a class="anchor" href="#%e6%a6%82%e5%bf%b5">#</a>
</h3>
<p>集合不能直接存储基本数据类型（对于基本数据类型，会执行自动装箱转为包装类型），且集合也不能直接存储Java对象。集合当中存储的都是Java对象的内存地址。（或者说集合中存储的引用）。</p>
<p>集合在Java中本身也属于一个对象。因此集合也可以存储集合。（一个塑料袋装苹果，一个塑料袋装梨子，再用一个大袋子装两袋水果。）</p>
<p>每一个不同的集合，底层会对应不同的数据结构。如：数组，二叉树，链表，哈希表。。（菜篮子，塑料袋，布袋子）</p>
<p>集合在JDK哪个包下？<code>java.util.*</code></p>
<h3 id="体系结构">
  体系结构
  <a class="anchor" href="#%e4%bd%93%e7%b3%bb%e7%bb%93%e6%9e%84">#</a>
</h3>
<p>在java中集合分为两大类：</p>
<p>一类是单个方式存储元素，这一类集合的父接口为：<code>java.util.Collection;</code></p>
<p>一类是以键值对的方式存储元素，这一类集合的父接口为：<code>java.util.Map;</code></p>
<h4 id="collection">
  Collection
  <a class="anchor" href="#collection">#</a>
</h4>
<p><img src="/picture/JavaNote_4-20200520233157.png" alt="20200520233157" /></p>
<p>Vector：是线程安全的，效率较低，一般不用。</p>
<p>ArrayList：是非线程安全的，但是效率高。</p>
<p>LinkedList：底层是双向链表</p>
<p>HashSet：底层是HashMap，放到HashSet集合中的元素等同于放到HashMap集合Key部分了。</p>
<p>TreeSet：底层是TreeMap，放到TreeSet集合中的元素等同于放到TreeMap集合Key部分了。</p>
<p><strong>这些子类的构造方法都能够传<code>Collection</code>类型的数据，因此所有<code>Collection</code>的子类都能够相互转换。</strong></p>
<h3 id="collection-1">
  Collection
  <a class="anchor" href="#collection-1">#</a>
</h3>
<p>Collection能够存储什么元素？</p>
<p>假如没有使用泛型，Collection中能够装任意Object的子类。</p>
<p>一些方法：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>boolean add(Object e)</code></td>
<td>添加元素</td>
</tr>
<tr>
<td><code>int size()</code></td>
<td>获取集合中元素个数</td>
</tr>
<tr>
<td><code>void clear()</code></td>
<td>清空集合</td>
</tr>
<tr>
<td><code>boolean contains(Object e)</code></td>
<td>判断集合中是否存在某个元素</td>
</tr>
<tr>
<td><code>boolean remove(Object e)</code></td>
<td>删除集合中某个元素</td>
</tr>
<tr>
<td><code>boolean isEmpty()</code></td>
<td>判断集合是否为空</td>
</tr>
<tr>
<td><code>Object[] toArray()</code></td>
<td>将集合转为数组</td>
</tr>
</tbody>
</table>
<h4 id="迭代">
  迭代
  <a class="anchor" href="#%e8%bf%ad%e4%bb%a3">#</a>
</h4>
<p>以下迭代方式，适用于除了Map之外的所有的Collection的子类。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">Collection</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">();</span>
<span class="c1">// 第一步：获取集合对象的迭代器Iterator，指向首元素的前一位
</span><span class="c1"></span><span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
<span class="c1">// 第二步：遍历
</span><span class="c1">// boolean hasNext() 是否还有元素可以迭代
</span><span class="c1">// Object next() 返回下一元素，取出来统一为Object类型
</span><span class="c1"></span><span class="k">while</span><span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">obj</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>迭代器</p>
<p>当集合的结构发生改变（增加，删除元素）时，迭代器必须重新获取；</p>
<p>在迭代过程中，不能改变集合的结构（增加，删除元素），</p>
<p>否则会出现<code>java.util.ConcurrentModificationException</code>异常。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">java.util.Collection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Iterator</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CollectionTest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Collection</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">();</span>
        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>
        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">2</span><span class="o">);</span>
        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;abe&#34;</span><span class="o">);</span>
        <span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
        <span class="k">while</span><span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">Object</span> <span class="n">o</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
            <span class="n">c</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">o</span><span class="o">);</span> <span class="c1">// 集合结构改变，程序报错。
</span><span class="c1"></span>            <span class="cm">/*
</span><span class="cm">            it.remove(); // 正确，不会报错。直接删除迭代器指向的元素。
</span><span class="cm">            */</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>改进方法，使用迭代器的<code>remove</code>方法。</p>
<p>解释：调用<code>iterator()</code>获取迭代器时，相当于给集合拍一个快照。假如集合发生改变，那么快照将不能生效。</p>
<h4 id="contains方法">
  Contains方法
  <a class="anchor" href="#contains%e6%96%b9%e6%b3%95">#</a>
</h4>
<p><strong>底层调用了<code>equals</code>方法进行比对</strong>，确定是否包含某个元素。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CollectionTest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Collection</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">();</span>
        <span class="n">String</span> <span class="n">s1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="s">&#34;abc&#34;</span><span class="o">);</span>
        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">s1</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">s2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="s">&#34;def&#34;</span><span class="o">);</span>
        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">s2</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;元素的个数是：&#34;</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="na">size</span><span class="o">());</span> <span class="c1">// 2
</span><span class="c1"></span>        
        <span class="n">String</span> <span class="n">x</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="s">&#34;abc&#34;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">x</span><span class="o">));</span> <span class="c1">// true or false?? --&gt; true
</span><span class="c1"></span>        <span class="c1">// 原因：
</span><span class="c1"></span>        <span class="c1">// contains源码进行比较时,调用了equals方法。
</span><span class="c1"></span>        <span class="c1">// String重写的equals方法进行的是字符串内容的比较,而不是对象引用地址的比较。
</span><span class="c1"></span>    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>例子2：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CollectionTest2</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Collection</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">();</span>
        <span class="n">User</span> <span class="n">u1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">(</span><span class="s">&#34;Jack&#34;</span><span class="o">);</span>
        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">u1</span><span class="o">);</span>
        <span class="n">User</span> <span class="n">u2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">(</span><span class="s">&#34;Jack&#34;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">u2</span><span class="o">));</span> 
        <span class="c1">// User若没有重写equals方法，返回false；User若重写了equals方法，可以返回true
</span><span class="c1"></span>    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">User</span><span class="o">(){}</span>
    <span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="o">!(</span><span class="n">o</span> <span class="k">instanceof</span> <span class="n">User</span><span class="o">))</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="o">==</span> <span class="k">this</span><span class="o">)</span> <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="n">User</span> <span class="n">u</span> <span class="o">=</span> <span class="o">(</span><span class="n">User</span><span class="o">)</span><span class="n">o</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">u</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>结论：</p>
<p>放在集合中的元素，必须重写<code>equals</code>方法</p>
<h3 id="list">
  List
  <a class="anchor" href="#list">#</a>
</h3>
<p><code>Collection</code>的子类，具备<code>Collection</code>中没有的方法。</p>
<p><code>Object get(index)</code> : 根据下标获取元素。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">myList</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">myList</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">obj</span><span class="o">);</span>
    <span class="c1">// 不需要使用迭代器，通过下标就能够访问元素
</span><span class="c1"></span><span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="arrayiist">
  ArrayIist
  <a class="anchor" href="#arrayiist">#</a>
</h4>
<p>性质：</p>
<ol>
<li>集合初始化容量为10 （JDK8以上：底层先创建了一个长度为0的空数组，当添加第一个元素时，初始化容量10）</li>
<li>集合底层是<code>Object</code>类型的数组<code>Object[]</code></li>
<li>扩容：原容量的1.5倍。由于ArrayList底层是数组，数组的扩容效率较低，因此尽量减少扩容次数，尽量在初始化时就分配足够大的容量。</li>
<li>优点：检索效率高。缺点：随机增删元素效率低。无法存储大数据量（难以找到一块大的连续空进）</li>
<li>用的最多</li>
</ol>
<p>位运算符：</p>
<p><code>&lt;&lt;</code>左移：乘2的n次方</p>
<p><code>&gt;&gt;</code>右移：除以2的n次方</p>
<p>构造方法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">List</span> <span class="n">myList1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">();</span>

<span class="c1">// 初始化容量
</span><span class="c1"></span><span class="n">List</span> <span class="n">myList2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">(</span><span class="n">100</span><span class="o">);</span>

<span class="c1">// 可以传入一个Collection对象作为初始化
</span><span class="c1"></span><span class="n">Collection</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">();</span>
<span class="n">List</span> <span class="n">myList3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="linkedlist">
  Linkedlist
  <a class="anchor" href="#linkedlist">#</a>
</h4>
<p>双向链表，易增删，难查询。</p>
<p>但可以给链表设置下标。（虽然没什么用）</p>
<p>不管是LinkedList还是ArrayList，写代码时都不需要关系具体是哪个集合。由于他们都是属于List接口，调用的方法也都是接口中的方法。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">List</span> <span class="n">list2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">();</span>
<span class="c1">// List list2 = new LinkedList();
</span><span class="c1">// 这里无论用哪种list，下面的代码都不需要改动。
</span><span class="c1"></span><span class="n">list2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;123&#34;</span><span class="o">);</span>
<span class="n">list2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;456&#34;</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="vector">
  Vector
  <a class="anchor" href="#vector">#</a>
</h4>
<p>用的很少。</p>
<p>底层是数组，初始化容量是10。</p>
<p>怎么扩容的？原容量的2倍 。</p>
<p>ArrayList增长是原容量的1.5倍。</p>
<p>Vector中所有的方法都是线程同步的，都带有synchronized关键字，是线程安全的，效率较低，用的比较少。</p>
<p>怎么将一个线程不安全的ArrayList集合转化为线程安全的呢？</p>
<p>使用集合工具类：<code>java.util.Collections;</code></p>
<p><em><code>java.util.Collection</code>是接口</em></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">List</span> <span class="n">myList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">();</span>
<span class="n">Collections</span><span class="o">.</span><span class="na">synchronizedList</span><span class="o">(</span><span class="n">myList</span><span class="o">);</span> <span class="c1">// 转为线程安全
</span><span class="c1"></span><span class="n">myList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;111&#34;</span><span class="o">);</span>


</code></pre></td></tr></table>
</div>
</div><h3 id="set">
  Set
  <a class="anchor" href="#set">#</a>
</h3>
<p>无序不可重复。这里的无序指的是没有下标，存储顺序与取出顺序不同。</p>
<p>但SortedSet可以排序</p>
<p>set底层是map的key</p>
<h4 id="treeset">
  TreeSet
  <a class="anchor" href="#treeset">#</a>
</h4>
<p>可以自动进行存入元素的排序。</p>
<p>方式1：</p>
<p>对于自定义类，必须实现好<code>java.lang.Comparable</code>接口，实现里面的<code>compareTo()</code>方法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">Customer</span> <span class="kd">implements</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">Customer</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>
    <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">Customer</span><span class="o">()</span> <span class="o">{</span>
        
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nf">Customer</span><span class="o">(</span><span class="kt">int</span> <span class="n">age</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="n">Customer</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 自定义比较规则：按年龄排序，若年龄相同，按名字排序
</span><span class="c1"></span>        <span class="c1">// &lt; 返回负数，= 返回0，&gt; 返回正数
</span><span class="c1"></span>        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">==</span> <span class="n">o</span><span class="o">.</span><span class="na">age</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">o</span><span class="o">.</span><span class="na">name</span><span class="o">);</span> <span class="c1">// 调用String的compareTo方法进行字符串字典序排序
</span><span class="c1"></span>        <span class="o">}</span>
        <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">-</span> <span class="n">o</span><span class="o">.</span><span class="na">age</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>遍历时以中序遍历顺序（左根右）</p>
<p><img src="/picture/JavaNote_4-20200602162733202.png" alt="image-20200602162733202" /></p>
<p>方式2：比较器的方法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WuGui</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">WuGui</span><span class="o">(</span><span class="kt">int</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">TreeSet</span><span class="o">&lt;</span><span class="n">WuGui</span><span class="o">&gt;</span> <span class="n">wuguis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeSet</span><span class="o">&lt;&gt;(</span><span class="k">new</span> <span class="n">WuGuiComparator</span><span class="o">());</span> <span class="c1">// 传入比较器对象
</span><span class="c1"></span>    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">WuGuiComparator</span> <span class="kd">implements</span> <span class="n">Comparator</span><span class="o">&lt;</span><span class="n">WuGui</span><span class="o">&gt;</span> <span class="o">{</span> <span class="c1">// 定义乌龟类的比较器
</span><span class="c1"></span>    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span> <span class="o">(</span><span class="n">WuGui</span> <span class="n">o1</span><span class="o">,</span> <span class="n">WuGui</span> <span class="n">o2</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">o1</span><span class="o">.</span><span class="na">age</span> <span class="o">-</span> <span class="n">o2</span><span class="o">.</span><span class="na">age</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// 优化：匿名内部类方式
</span><span class="c1"></span><span class="cm">/*
</span><span class="cm">...
</span><span class="cm">public static void main(String[] args) {
</span><span class="cm">    TreeSet&lt;WuGui&gt; wuguis = new TreeSet&lt;&gt;(new Comparator&lt;WuGui&gt;(){
</span><span class="cm">        public int compare(WuGui o1, WuGui o2) {
</span><span class="cm">            return o1.age - o2.age;
</span><span class="cm">        }
</span><span class="cm">    })
</span><span class="cm">}
</span><span class="cm">...
</span><span class="cm">*/</span>
</code></pre></td></tr></table>
</div>
</div><p>若有多个比较规则，或者比较规则多变，可以使用方式2<code>Comparator</code>比较好</p>
<p>若有单个比较规则，则使用方式1<code>Comparable</code></p>
<h3 id="集合工具类">
  集合工具类
  <a class="anchor" href="#%e9%9b%86%e5%90%88%e5%b7%a5%e5%85%b7%e7%b1%bb">#</a>
</h3>
<p><code>java.util.Collections</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="c1">// 变成线程安全的
</span><span class="c1"></span><span class="n">Collections</span><span class="o">.</span><span class="na">synchronizedList</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
<span class="c1">// 排序(需要实现Comparable接口)
</span><span class="c1"></span><span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;abf&#34;</span><span class="o">);</span>
<span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;abx&#34;</span><span class="o">);</span>
<span class="n">Collections</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>


</code></pre></td></tr></table>
</div>
</div><div style="page-break-after: always;"></div></p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">

  


  

  



<div class="book-languages" tabindex="0" aria-haspopup="true">
  <ul>
    <li class="flex align-center">
      <img src="/svg/translate.svg" class="book-icon" alt="Languages" />
      English
    </li> 
  </ul>

  <ul class="book-languages-list">
    
    <li class="active">
      <a href="http://huangbxaaa.github.io/en/" class="flex align-center">
        <img src="/svg/translate.svg" class="book-icon" alt="Languages" />
        English
      </a>
    </li>
    
    <li class="">
      <a href="http://huangbxaaa.github.io/ko/" class="flex align-center">
        <img src="/svg/translate.svg" class="book-icon" alt="Languages" />
        한국어
      </a>
    </li>
    
  </ul>
</div>






</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#date-javautil">Date [Java.util]</a>
      <ul>
        <li><a href="#simpledateformat-javatext">SimpleDateFormat [java.text]</a></li>
      </ul>
    </li>
    <li><a href="#数字类">数字类</a>
      <ul>
        <li><a href="#数字格式化decimalformat-javatext">数字格式化：DecimalFormat [java.text]</a></li>
        <li><a href="#高精度数据bigdecimal">高精度数据BigDecimal</a></li>
        <li><a href="#随机数">随机数</a></li>
      </ul>
    </li>
    <li><a href="#枚举">枚举</a></li>
    <li><a href="#异常">异常</a>
      <ul>
        <li><a href="#编译时异常">编译时异常</a></li>
        <li><a href="#运行时异常">运行时异常</a></li>
        <li><a href="#错误">错误</a></li>
        <li><a href="#对异常的处理">对异常的处理</a></li>
        <li><a href="#异常的方法">异常的方法</a></li>
        <li><a href="#finally">finally</a></li>
        <li><a href="#自定义异常">自定义异常</a></li>
        <li><a href="#异常方法的重写">异常方法的重写</a></li>
      </ul>
    </li>
    <li><a href="#集合">集合</a>
      <ul>
        <li><a href="#概念">概念</a></li>
        <li><a href="#体系结构">体系结构</a></li>
        <li><a href="#collection-1">Collection</a></li>
        <li><a href="#list">List</a></li>
        <li><a href="#set">Set</a></li>
        <li><a href="#集合工具类">集合工具类</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












